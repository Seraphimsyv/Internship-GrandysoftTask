{"ast":null,"code":"var _jsxFileName = \"/home/kirill/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/Test/task_grandysoft/src/DrawBoard.js\";\nimport * as React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass DrawBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleLeftClick = this.handleLeftClick.bind(this);\n    this.handleRightClick = this.handleRightClick.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleCollapseClick = this.handleCollapseClick.bind(this);\n    this.state = {\n      contextId: 'DrawBoardDiv',\n      isDraw: false,\n      lines: [],\n      dots: {},\n      lastPoints: {},\n      lastDots: {}\n    };\n  }\n  handleLeftClick(evt) {\n    if (this.state.isDraw !== true) {\n      this.setState({\n        isDraw: true,\n        lastPoints: {\n          start: {\n            x: evt.nativeEvent.x,\n            y: evt.nativeEvent.y\n          },\n          end: {\n            x: evt.nativeEvent.x,\n            y: evt.nativeEvent.y\n          }\n        }\n      });\n    } else {\n      let point = Object.assign({\n        center: this.getCenter(this.state.lastPoints.start, this.state.lastPoints.end)\n      }, this.state.lastPoints);\n      let lines = [point].concat(this.state.lines);\n      this.setState({\n        isDraw: false,\n        lines: lines,\n        dots: Object.assign(this.state.dots, this.state.lastDots),\n        lastPoints: {},\n        lastDots: {}\n      });\n    }\n  }\n  handleRightClick(evt) {\n    evt.preventDefault();\n    if (this.state.isDraw === true) {\n      this.setState({\n        isDraw: false,\n        lastDots: {}\n      });\n    }\n  }\n  handleMouseMove(evt) {\n    if (this.state.isDraw === true) {\n      let lastDots = {};\n      let lastPoint = Object.assign({}, this.state.lastPoints);\n      lastPoint.end = {\n        x: evt.nativeEvent.x,\n        y: evt.nativeEvent.y\n      };\n      const ctx = window.document.getElementById(this.state.contextId).getContext('2d');\n      ctx.clearRect(0, 0, 500, 500);\n      this.drawLine(ctx, lastPoint.start, lastPoint.end);\n      for (let l = 0; l < this.state.lines.length; l++) {\n        this.drawLine(ctx, this.state.lines[l].start, this.state.lines[l].end);\n        let dot = this.checkIntersect(this.state.lines[l].start, this.state.lines[l].end, lastPoint.start, lastPoint.end);\n        if (dot !== undefined) {\n          this.drawIntersect(dot.x, dot.y);\n          lastDots[`${l}-${this.state.lines.length}`] = dot;\n        } else {\n          delete lastDots[`${l}-${this.state.lines.length}`];\n        }\n      }\n      for (const dot in this.state.dots) {\n        this.drawIntersect(this.state.dots[dot].x, this.state.dots[dot].y);\n      }\n      this.setState({\n        lastPoints: lastPoint,\n        lastDots: Object.assign(this.state.lastDots, lastDots)\n      });\n    }\n  }\n  handleCollapseClick() {}\n  drawLine(ctx, start, end) {\n    ctx.beginPath();\n    ctx.moveTo(start.x, start.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.stroke();\n  }\n  drawIntersect(ctx, x, y) {\n    ctx.beginPath();\n    ctx.arc(x, y, 10, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.fillStyle = 'red';\n    ctx.strokeStyle = \"black\";\n    ctx.stroke();\n  }\n  drawDot() {}\n  getCenter(start, end) {\n    return {\n      x: (start.x + end.x) / 2,\n      y: (start.y + end.y) / 2\n    };\n  }\n  checkIntersect(from1, to1, from2, to2) {\n    const dX = to1.x - from1.x;\n    const dY = to1.y - from1.y;\n    const determinant = dX * (to2.y - from2.y) - (to2.x - from2.x) * dY;\n    if (determinant === 0) return false;\n    const lambda = ((to2.y - from2.y) * (to2.x - from1.x) + (from2.x - to2.x) * (to2.y - from1.y)) / determinant;\n    const gamma = ((from1.y - to1.y) * (to2.x - from1.x) + dX * (to2.y - from1.y)) / determinant;\n    if (!(0 <= lambda && lambda <= 1) || !(0 <= gamma && gamma <= 1)) return undefined;\n    return {\n      x: from1.x + lambda * dX,\n      y: from1.y + lambda * dY\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        style: {\n          border: '1px solid red'\n        },\n        id: \"DrawBoardDiv\",\n        width: \"500\",\n        height: \"500\",\n        onClick: this.handleLeftClick,\n        onContextMenu: this.handleRightClick,\n        onMouseMove: this.handleMouseMove\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default DrawBoard;","map":{"version":3,"names":["React","DrawBoard","Component","constructor","props","handleLeftClick","bind","handleRightClick","handleMouseMove","handleCollapseClick","state","contextId","isDraw","lines","dots","lastPoints","lastDots","evt","setState","start","x","nativeEvent","y","end","point","Object","assign","center","getCenter","concat","preventDefault","lastPoint","ctx","window","document","getElementById","getContext","clearRect","drawLine","l","length","dot","checkIntersect","undefined","drawIntersect","beginPath","moveTo","lineTo","stroke","arc","Math","PI","fill","fillStyle","strokeStyle","drawDot","from1","to1","from2","to2","dX","dY","determinant","lambda","gamma","render","border"],"sources":["/home/kirill/Документы/Test/task_grandysoft/src/DrawBoard.js"],"sourcesContent":["import * as React from 'react';\n\nclass DrawBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleLeftClick = this.handleLeftClick.bind(this);\n    this.handleRightClick = this.handleRightClick.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleCollapseClick = this.handleCollapseClick.bind(this);\n    this.state = {\n      contextId: 'DrawBoardDiv',\n      isDraw: false,\n      lines: [],\n      dots: {},\n      lastPoints: {},\n      lastDots: {}\n    };\n  }\n\n  handleLeftClick(evt) {\n    if (this.state.isDraw !== true) {\n      this.setState({\n        isDraw: true,\n        lastPoints: {\n          start: {\n            x: evt.nativeEvent.x,\n            y: evt.nativeEvent.y\n          },\n          end: {\n            x: evt.nativeEvent.x,\n            y: evt.nativeEvent.y\n          }\n        }\n      })\n    } else {\n      let point = Object.assign(\n        { center: this.getCenter(this.state.lastPoints.start, this.state.lastPoints.end) },\n        this.state.lastPoints\n      );  \n      let lines = [point].concat(this.state.lines);\n      this.setState({\n        isDraw: false,\n        lines: lines,\n        dots: Object.assign(this.state.dots, this.state.lastDots),\n        lastPoints: {},\n        lastDots: {}\n      })\n    }\n  }\n\n  handleRightClick(evt) {\n    evt.preventDefault();\n    if (this.state.isDraw === true) {\n      this.setState({\n        isDraw: false,\n        lastDots: {}\n      })\n    }\n  }\n\n  handleMouseMove(evt) {\n    if (this.state.isDraw === true) {\n      let lastDots = {};\n      let lastPoint = Object.assign({}, this.state.lastPoints);\n      lastPoint.end = {\n        x: evt.nativeEvent.x,\n        y: evt.nativeEvent.y\n      };\n\n      const ctx = window.document.getElementById(this.state.contextId).getContext('2d');\n\n      ctx.clearRect(0, 0, 500, 500);\n      this.drawLine(ctx, lastPoint.start, lastPoint.end);\n\n      for(let l = 0; l < this.state.lines.length; l++) {\n        this.drawLine(ctx, this.state.lines[l].start, this.state.lines[l].end);\n\n        let dot = this.checkIntersect(this.state.lines[l].start, this.state.lines[l].end, lastPoint.start, lastPoint.end);\n        if (dot !== undefined) {\n          this.drawIntersect(dot.x, dot.y);\n          lastDots[`${l}-${this.state.lines.length}`] = dot;\n        } else {\n          delete lastDots[`${l}-${this.state.lines.length}`];\n        }\n      }\n\n      for(const dot in this.state.dots) {\n        this.drawIntersect(this.state.dots[dot].x, this.state.dots[dot].y);\n      }\n\n      this.setState({\n        lastPoints: lastPoint,\n        lastDots: Object.assign(this.state.lastDots, lastDots)\n      });\n    }\n  }\n\n  handleCollapseClick() {\n\n  }\n\n  drawLine(ctx, start, end) {\n    ctx.beginPath();\n    ctx.moveTo(start.x, start.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.stroke();\n  }\n\n  drawIntersect(ctx, x, y) {\n    ctx.beginPath();\n    ctx.arc(x, y, 10, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.fillStyle = 'red'\n    ctx.strokeStyle = \"black\";\n    ctx.stroke();\n  }\n\n  drawDot() {\n\n  }\n\n  getCenter(start, end) {\n    return {\n      x: (start.x + end.x) / 2,\n      y: (start.y + end.y) / 2\n    }\n  }\n\n  checkIntersect(from1, to1, from2, to2) {\n    const dX = to1.x - from1.x;\n    const dY = to1.y - from1.y;\n  \n    const determinant =  dX * (to2.y - from2.y) - (to2.x - from2.x) * dY;\n    if (determinant === 0) return false;\n  \n    const lambda = ((to2.y - from2.y) * (to2.x - from1.x) + (from2.x - to2.x) * (to2.y - from1.y)) / determinant;\n    const gamma = ((from1.y - to1.y) * (to2.x - from1.x) + dX * (to2.y - from1.y)) / determinant;\n  \n    if (!(0 <= lambda && lambda <= 1) || !(0 <= gamma && gamma <= 1)) return undefined;\n  \n    return {\n      x: from1.x + lambda * dX,\n      y: from1.y + lambda * dY,\n    };\n  \n  }\n\n  render() {\n    return (\n      <div>\n        <canvas\n          style={{ border: '1px solid red'}}\n          id=\"DrawBoardDiv\"\n          width='500'\n          height='500'\n          onClick={this.handleLeftClick}\n          onContextMenu={this.handleRightClick}\n          onMouseMove={this.handleMouseMove}\n        />\n      </div>\n    )\n  }\n}\n\nexport default DrawBoard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}